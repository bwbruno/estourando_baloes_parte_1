<!DOCTYPE HTML>
<html lang="pt-br">

<head>
	<meta charset="UTF-8">

	<title>Estourando balões</title>



</head>

<body>
	<div style="float:left; width:auto; height:500px; background: #FFF; border: solid 1px #A2A2A2">
		<table border="1">
			<tr>
				<td>
					<img src="imagens/balao_azul_grande.png" />
				</td>
				<td id="cont_vivos">
					10
				</td>
			</tr>
		</table>

		<br />
		<table border="1">
			<tr>
				<td>
					<img src="imagens/balao_azul_grande_estourado.png" />
				</td>
				<td>
					10
				</td>
			</tr>
		</table>

		<br />
		<table border="1" style="width: 140px; height: 132px;">
			<tr>
				<td style="background: url('imagens/cronometro.png')">
					<p style="margin-left: 55px; margin-top: 29px;" id="cronometro"></p>
				</td>
			</tr>
		</table>

	</div>

	<div id="campo" style="float: left; width: 600px; height: 500px; background: url('imagens/cenario.png'); background-position: bottom;">
		<img src="imagens/balao_azul_grande.png" alt="" srcset="">
	</div>
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

	<script>
		var qnt_baloes = 80;
		for(let i = 0; i < qnt_baloes; i++){
			$("#campo").append(`<img style="height:50px" id="${i}" class="balao" onclick="estoura(${i})"  src="imagens/balao_azul_grande.png" alt="">`);
		}

		function estoura(i) {
			$("#"+i).attr("src", "imagens/balao_azul_grande_estourado.png")
			
			qnt_baloes--;
			$("#cont_vivos").text(qnt_baloes);
		}

		var stopTimer   = false;
		var url = document.URL;
		var tempo = url.split("?")[1];
		var counter = tempo;
		timer(tempo);

		function timer(tempo) {
			if (stopTimer === true)
				return;
			console.log('timer: ', counter--);
			document.querySelector("#cronometro").innerText = counter;
			if(counter == 0){
				stopCounter();
				alert("Tempo esgotado. Você perdeu!!!")
			}
			setTimeout(timer, 1000);
		}

		function startCounter(tempo) {
			stopTimer = false;
			timer(tempo);
		}

		function resetCounter(value) {
			stopCounter();
			counter = 0;

		}
		function stopCounter() {
			stopTimer = true;
		}
		
	</script>
</body>

</html>